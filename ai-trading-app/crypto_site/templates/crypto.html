{% extends "base.html" %}

{% block content %}
<style>
    /* Grelha 2x2 para as ferramentas */
    .ai-tools-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 25px;
        margin-top: 20px;
    }
    
    @media (max-width: 768px) {
        .ai-tools-grid { grid-template-columns: 1fr; }
    }
</style>

<div class="market-page-container fade-in">
    
    <div class="page-header text-center">
        <h2><i class="fa-brands fa-bitcoin"></i> Crypto Hub</h2>
        <p>A tua central de intelig√™ncia blockchain.</p>
    </div>

    <div class="stats-row" style="margin: 40px 0; gap: 20px;">
        <div class="stat-item glass-panel">
            <div class="icon-box" style="margin-bottom:10px; font-size:1.5rem;"><i class="fa-brands fa-btc"></i></div>
            <h3 style="margin:0;">$95,430</h3>
            <span class="green">+2.4%</span>
            <p style="margin-top:5px; font-size:0.8rem;">Bitcoin Price</p>
        </div>
        <div class="stat-item glass-panel">
            <div class="icon-box" style="margin-bottom:10px; font-size:1.5rem;"><i class="fa-brands fa-ethereum"></i></div>
            <h3 style="margin:0;">$2,890</h3>
            <span class="red">-0.5%</span>
            <p style="margin-top:5px; font-size:0.8rem;">Ethereum Price</p>
        </div>
        <div class="stat-item glass-panel">
            <div class="icon-box" style="margin-bottom:10px; font-size:1.5rem;"><i class="fa-solid fa-chart-pie"></i></div>
            <h3 style="margin:0;">58.2%</h3>
            <span class="text-muted">High</span>
            <p style="margin-top:5px; font-size:0.8rem;">Dominance</p>
        </div>
    </div>

    <div class="section-divider"></div>

    <div id="ai-suite" class="text-center mb-20" style="scroll-margin-top: 100px;">
        <h3><i class="fa-solid fa-robot"></i> Suite de Trading AI</h3>
        <p class="text-muted">Escolhe a ferramenta certa para o teu objetivo.</p>
    </div>

    <div class="ai-tools-grid">
        
        <div class="feature-card glass-panel">
            <div class="icon-box"><i class="fa-solid fa-magnifying-glass-chart"></i></div>
            <h3>Analisar Moeda</h3>
            <p>Calculadora de Risco e ROI para um trade espec√≠fico.</p>
            <a href="{{ url_for('crypto_analyze_page') }}" class="btn-glow mt-20">
                Analisar
            </a>
        </div>

        <div class="feature-card glass-panel">
            <div class="icon-box"><i class="fa-solid fa-bolt"></i></div>
            <h3>Top Picks</h3>
            <p>Oportunidades de momentum detetadas pelo scanner.</p>
            <a href="{{ url_for('crypto_recommend_page') }}" class="btn-glow mt-20">
                Ver Lista
            </a>
        </div>

        <div class="feature-card glass-panel">
            <div class="icon-box"><i class="fa-solid fa-chart-pie"></i></div>
            <h3>Criar Portf√≥lio</h3>
            <p>Estrat√©gia de diversifica√ß√£o baseada no teu capital.</p>
            <a href="{{ url_for('crypto_strategy_page') }}" class="btn-glow mt-20">
                Planear
            </a>
        </div>

        <div class="feature-card glass-panel">
            <div class="icon-box"><i class="fa-solid fa-comments-dollar"></i></div>
            <h3>Market Decoder</h3>
            <p>A AI explica "porqu√™" o mercado se mexeu hoje.</p>
            <a href="{{ url_for('crypto_decoder_page') }}" class="btn-glow mt-20">
                Decifrar
            </a>
        </div>
    </div>

    <div class="section-divider"></div>

    <div id="top-movers" class="section-container mt-60" style="scroll-margin-top: 100px;">
        <div class="glass-panel">
            <h3 class="mb-20"><i class="fa-solid fa-layer-group"></i> Movimentos do Dia</h3>
            <div class="home-markets-grid" style="margin:0; padding:0; gap:20px;">
                <div>
                    <h4 class="green"><i class="fa-solid fa-arrow-trend-up"></i> Top Gainers</h4>
                    <ul id="gainers-list" class="market-list">
                        <li><span>SOL</span> <span class="green">+5.4%</span></li>
                        <li><span>AVAX</span> <span class="green">+3.2%</span></li>
                        <li><span>LINK</span> <span class="green">+2.1%</span></li>
                    </ul>
                </div>
                <div>
                    <h4 class="red"><i class="fa-solid fa-arrow-trend-down"></i> Top Losers</h4>
                    <ul id="losers-list" class="market-list">
                        <li><span>DOGE</span> <span class="red">-2.1%</span></li>
                        <li><span>PEPE</span> <span class="red">-4.5%</span></li>
                        <li><span>XRP</span> <span class="red">-1.2%</span></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="section-divider"></div>

    <div class="section-container mt-60">
        <div class="text-center mb-20">
            <h3><i class="fa-solid fa-graduation-cap"></i> Academia R√°pida</h3>
        </div>
        <div class="features-grid" style="margin-top:20px;">
            <div class="glass-panel academy-card">
                <div class="academy-icon">üêÇ</div>
                <h4>Bull Market</h4>
                <p>Mercado otimista. Pre√ßos a subir consistentemente.</p>
            </div>
            <div class="glass-panel academy-card">
                <div class="academy-icon">üêª</div>
                <h4>Bear Market</h4>
                <p>Mercado pessimista. Pre√ßos em queda prolongada.</p>
            </div>
            <div class="glass-panel academy-card">
                <div class="academy-icon">üíé</div>
                <h4>HODL</h4>
                <p>Estrat√©gia de manter a moeda a longo prazo, ignorando quedas.</p>
            </div>
        </div>
    </div>
    <div class="section-divider"></div>

    <div id="top-20-market" class="section-container mt-100 mb-100" style="scroll-margin-top: 100px;">
        <div class="text-center mb-20">
            <h3><i class="fa-solid fa-earth-americas"></i> Top 20 Mercado Global</h3>
            <p class="text-muted">Os principais ativos ordenados por relev√¢ncia.</p>
        </div>
        
        <div class="glass-panel table-responsive">
            <table class="market-table-full">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Ativo</th>
                        <th class="text-right">Pre√ßo</th>
                        <th class="text-right">24h %</th>
                    </tr>
                </thead>
                <tbody id="top-20-body">
    {% for coin in market_data %}
    <tr>
        <td class="rank-num">{{ loop.index }}</td>
        <td>
            <div class="asset-info">
                <i class="{{ coin.icon }} asset-icon" style="font-size:1.2rem; margin-right:10px;"></i>
                <div style="display:flex; flex-direction:column;">
                    <span style="font-weight:bold;">{{ coin.symbol }}</span>
                </div>
            </div>
        </td>
        <td class="text-right" style="font-family: monospace;">{{ coin.price }}</td>
        <td class="text-right {{ coin.color }}">{{ coin.change }}</td>
    </tr>
    {% else %}
    <tr><td colspan="4" class="text-center loading">A carregar dados...</td></tr>
    {% endfor %}
</tbody>
            </table>
        </div>
    </div>

</div>

<script src="https://unpkg.com/@studio-freight/lenis@1.0.42/dist/lenis.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const lenis = new Lenis({ duration: 1.2, easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)), smooth: true });
        function raf(time) { lenis.raf(time); requestAnimationFrame(raf); }
        requestAnimationFrame(raf);
    });
</script>
{% endblock %}